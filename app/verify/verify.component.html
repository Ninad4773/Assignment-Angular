<div class="container">
  <h3 class="d-flex justify-content-center m-5">Apply for personal loan</h3>
  <form class="m-5 form-group" name="applicationForm" #applicationForm="ngForm">
    <label for="city" class="mt-3">City</label
    ><span style="color: red;">*</span>
    <input
      id="city"
      type="text"
      class="form-control"
      [class.is-invalid]="city.invalid && (city.dirty || city.touched)"
      [class.is-valid]="!city.invalid"
      name="city"
      [(ngModel)]="userInfo.city"
      #city="ngModel"
      required
    />
    <div *ngIf="city.invalid && (city.dirty || city.touched)">
      <div *ngIf="city.errors.required" style="color: red;">
        Enter city name
      </div>
    </div>
    <label for="pan" class="mt-3">PAN No.</label
    ><span style="color: red;">*</span>
    <input
      id="pan"
      type="text"
      class="form-control"
      [class.is-invalid]="
        panNumber.invalid && (panNumber.dirty || panNumber.touched)
      "
      [class.is-valid]="!panNumber.invalid"
      name="panNumber"
      [(ngModel)]="userInfo.panNumber"
      #panNumber="ngModel"
      maxlength="10"
      required
      pattern="[A-Z]{5}[0-9]{4}[A-Z]"
    />
    <div *ngIf="panNumber.invalid && (panNumber.dirty || panNumber.touched)">
      <div *ngIf="panNumber.errors.required" style="color: red;">
        Enter pan card number
      </div>
      <div *ngIf="panNumber.errors.pattern" style="color: red;">
        Enter valid pan card number
      </div>
    </div>

    <label for="fullName" class="mt-3">Full name</label
    ><span style="color: red;">*</span>
    <input
      id="fullName"
      type="text"
      class="form-control"
      [class.is-invalid]="
        fullName.invalid && (fullName.dirty || fullName.touched)
      "
      [class.is-valid]="!fullName.invalid"
      name="fullName"
      [(ngModel)]="userInfo.fullname"
      #fullName="ngModel"
      required
      maxlength="140"
    />
    <div *ngIf="fullName.invalid && (fullName.dirty || fullName.touched)">
      <div *ngIf="fullName.errors.required" style="color: red;">
        Enter your full name
      </div>
    </div>

    <label for="email" class="mt-3">Email</label
    ><span style="color: red;">*</span>
    <input
      id="email"
      type="text"
      class="form-control"
      [class.is-invalid]="email.invalid && (email.dirty || email.touched)"
      [class.is-valid]="!email.invalid"
      name="email"
      [(ngModel)]="userInfo.email"
      #email="ngModel"
      required
      pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$"
      maxlength="255"
    />
    <div *ngIf="email.invalid && (email.dirty || email.touched)">
      <div *ngIf="email.errors.required" style="color: red;">
        Enter your email id
      </div>
      <div *ngIf="email.errors.pattern" style="color: red;">
        Enter valid email id
      </div>
    </div>

    <label for="mobile" class="mt-3">Mobile No.</label
    ><span style="color: red;">*</span>
    <div class="row justify-content-start">
      <div
        class="col-1"
        style="align-self: center; margin: 0; padding: 0; padding-left: 3.5vw;"
      >
        <span>+91</span>
      </div>
      <div class="col-11">
        <input
          id="mobile"
          type="tel"
          class="form-control"
          [class.is-invalid]="
            mobile.invalid && (mobile.dirty || mobile.touched)
          "
          [class.is-valid]="!mobile.invalid"
          name="mobile"
          [(ngModel)]="userInfo.mobile"
          #mobile="ngModel"
          required
          maxlength="10"
          pattern="[0-9]{10}"
          (ngModelChange)="onMobile()"
        />

        <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)">
          <div *ngIf="mobile.errors.required" style="color: red;">
            Enter your mobile no.
          </div>
          <div *ngIf="mobile.errors.pattern" style="color: red;">
            Enter valid mobile no.
          </div>
        </div>
      </div>
    </div>

    <div [hidden]="showOTPField">
      <label for="otp" class="mt-3">Enter OTP</label
      ><span style="color: red;">*</span>
      <div class="row">
        <div class="col-7">
          <input
            id="otp"
            type="text"
            class="form-control"
            [class.is-invalid]="
              otpControl.invalid && (otpControl.dirty || otpControl.touched)
            "
            [class.is-valid]="!otpControl.invalid"
            name="otp"
            [(ngModel)]="otp"
            #otpControl="ngModel"
            required
            maxlength="4"
            pattern="[0-9]{4}"
            (ngModelChange)="onOTP()"
          />
          <div
            *ngIf="
              otpControl.invalid && (otpControl.dirty || otpControl.touched)
            "
          >
            <div *ngIf="otpControl.errors.required" style="color: red;">
              Enter OTP
            </div>
            <div *ngIf="otpControl.errors.pattern" style="color: red;">
              OTP must contains only digits.
            </div>
          </div>
        </div>
        <div class="col-5">
          <button
            class="btn btn-link"
            [disabled]="disableResendOTP"
            (click)="onResendClick()"
            [hidden]="showErrorMsg"
          >
            Resend OTP
          </button>
          <span id="timer" [hidden]="secs == 0">00:00</span>
          <h6
            style="text-align: center; color: red; vertical-align: middle;"
            [hidden]="!showErrorMsg"
          >
            Please try again after an hour
          </h6>
        </div>
      </div>
    </div>
  </form>
</div>
